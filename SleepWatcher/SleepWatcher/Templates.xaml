<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:l="clr-namespace:SleepWatcher.Converters"
    xmlns:patientViewModels="clr-namespace:SleepWatcher.ViewModel.PatientViewModel"
    xmlns:view="clr-namespace:SleepWatcher.View"
    xmlns:design="clr-namespace:SleepWatcher.Design"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
    xmlns:viewModel="clr-namespace:SleepWatcher.ViewModel"
    mc:Ignorable="d">
    <viewModel:ViewModelLocator x:Key="Locator"/>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    <!--Single Patient view datatype triggers !-->
    <DataTemplate DataType="{x:Type patientViewModels:SinglePatientViewModel}">
        <view:SinglePatinetView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type design:DesignSinglePatientViewModel}">
        <view:SinglePatinetView />
    </DataTemplate>
    <DataTemplate DataType="{x:Type patientViewModels:AddPatientViewModel}">
        <view:AddPatientView />
    </DataTemplate>
    <!-- Resource dictionary entries should be defined here. -->
    <!--Datatemplate for notes list box!-->
    <DataTemplate x:Key="NotesListBoxTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBox Text="{Binding Text}" Margin="5,5,0,0" IsReadOnly="{Binding IsChecked, ElementName=IsReadOnly}"
                     AcceptsReturn="True" AcceptsTab="True" />
            <ToggleButton x:Name="IsReadOnly" IsChecked="False" Grid.Column="1" Margin="5,5,0,0" MinWidth="20" />
        </Grid>
    </DataTemplate>
    <!-- Steps list box datatemplate!-->
    <DataTemplate x:Key="StepsListBoxTemplate">

        <Grid Margin="0,5,0,0">
            <Grid.Resources>
                <l:EnumStringToFriendlyNameConverter x:Key="EnumConverter" />
            </Grid.Resources>
            <Grid.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="Black" Offset="1" />
                    <GradientStop Color="#26D8D8D8" Offset="0.972" />
                </LinearGradientBrush>
            </Grid.Background>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal">
                <TextBlock Grid.Row="0" Grid.Column="0" Margin="5,5,0,0" Text="Step: "
                           Style="{DynamicResource TextBlockStyle}" FontWeight="Bold" />
                <TextBlock Grid.Row="0" Grid.Column="0" Margin="5,5,0,0"
                           Text="{Binding StepName, Converter={StaticResource EnumConverter}}"
                           Style="{DynamicResource TextBlockStyle}" />

            </StackPanel>
            <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1">
                <TextBlock Margin="5,5,0,0" FontWeight="Bold" Text="Status: " Style="{DynamicResource TextBlockStyle}" />
                <TextBlock x:Name="textBlock" Grid.Row="0" Grid.Column="2" Margin="5,5,0,0" Text="{Binding Status}"
                           Style="{DynamicResource TextBlockStyle}" />

            </StackPanel>
            <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="0">
                <TextBlock FontWeight="Bold" Margin="5,5,0,0" Style="{DynamicResource TextBlockStyle}"
                           Text="Start Date: " />
                <TextBlock Margin="5,5,0,0" Style="{DynamicResource TextBlockStyle}"
                           Text="{Binding DateStarted, Mode=OneWay}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1">
                <TextBlock FontWeight="Bold" Margin="10,5,0,0" Style="{DynamicResource TextBlockStyle}"
                           Text="Due Date: " />
                <TextBlock Margin="5,5,0,0" Style="{DynamicResource TextBlockStyle}"
                           Text="{Binding DueDate, Mode=OneWay}" />
            </StackPanel>
            <Expander DataContext="{Binding SinglePatientViewModel, Source={StaticResource Locator}}" Grid.Row="1" Grid.Column="1" Margin="5,5,0,0"
                      IsExpanded="True" Header="Notes" Visibility="Collapsed">
                <ListBox ItemsSource="{Binding Notes}" ItemTemplate="{StaticResource NotesListBoxTemplate}" />
            </Expander>
            <StackPanel Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" DataContext="{DynamicResource Locator}"
                        Visibility="{Binding IsSelected, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}">
                <Button Content="New Note"
                        Style="{DynamicResource AddNewNoteButtonStyle}" Margin="5,5,5,0" HorizontalAlignment="Right"
                        Command="{Binding SinglePatientViewModel.AddNewNoteCommand, Mode=OneWay}"
                         />
                <Button x:Name="btnCancled" Grid.Column="2" Content="Mark Canceled" Margin="5,5,5,0"
                        Style="{DynamicResource AddNewNoteButtonStyle}" HorizontalAlignment="Right"
                        Command="{Binding SinglePatientViewModel.MarkCanceledCommand, Mode=OneWay}" />
                <Button x:Name="btnCompleted" Grid.Column="2" Content="Mark Completed" Margin="5,5,5,5"
                        Style="{DynamicResource AddNewNoteButtonStyle}" HorizontalAlignment="Right"
                        Command="{Binding SinglePatientViewModel.MarkCompleteCommand, Mode=OneWay}" />
            </StackPanel>
        </Grid>

        <DataTemplate.Triggers>

            <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                <Setter TargetName="textBlock" Property="Foreground" Value="Green" />
                <Setter TargetName="btnCompleted" Property="Visibility" Value="Collapsed" />
                <Setter TargetName="btnCancled" Property="Visibility" Value="Collapsed" />

            </DataTrigger>
             <DataTrigger Binding="{Binding Status}" Value="Ongoing">
                <Setter TargetName="textBlock" Property="Foreground" Value="DarkOrange" />
                
            </DataTrigger>
             <DataTrigger Binding="{Binding Status}" Value="Overdue">
                <Setter TargetName="textBlock" Property="Foreground" Value="Red" />
                
            </DataTrigger>
            <DataTrigger Binding="{Binding IsCancled}" Value="True">
                <Setter TargetName="textBlock" Property="Foreground" Value="Black" />
                <Setter TargetName="btnCompleted" Property="Visibility" Value="Collapsed" />
                <Setter TargetName="btnCancled" Property="Content" Value="Uncancel" />
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>

    <!-- list of patients datatemplate !-->
    <DataTemplate x:Key="ListBoxItemsTemplate">
        <Grid x:Name="grid" Background="#FFDADADA" d:DesignWidth="200.667" d:DesignHeight="100" MaxHeight="100"
              Height="Auto" Width="Auto" Margin="5,5,5,0">
            <Grid.Resources>
                <l:EnumStringToFriendlyNameConverter x:Key="EnumConverter" />
            </Grid.Resources>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <TextBlock Text="{Binding FullName, Mode=OneWay}" MinHeight="0" Foreground="#FF645A53" FontSize="26.667"
                       VerticalAlignment="Top" Padding="0" FontFamily="Javanese Text" Grid.ColumnSpan="2"
                       Margin="5,0,0,0" Height="40" FontWeight="Bold" />
            <TextBlock x:Name="textBlock" Grid.Row="1" Margin="5,0,5,1" Text="Step:" Foreground="#FF614736"
                       FontSize="13.333" FontWeight="Bold" FontFamily="Sitka Text" />
            <TextBlock x:Name="textBlock2" Grid.ColumnSpan="1" Height="Auto" Grid.Row="1"
                       Text="{Binding CurrentStep.StepName, Converter={StaticResource EnumConverter}}" Width="Auto"
                       Grid.Column="1" Margin="5,0,5,1" Foreground="#FF513A29" FontSize="13.333"
                       FontFamily="Mongolian Baiti" />
            <TextBlock x:Name="textBlock_Copy" Grid.Row="2" Margin="5,0,5,1" Text="Status:" Foreground="#FF614736"
                       FontSize="13.333" FontWeight="Bold" FontFamily="Sitka Text" />
            <TextBlock x:Name="textBlock1" Grid.ColumnSpan="1" Height="Auto" Grid.Row="2"
                       Text="{Binding CurrentStep.Status, Mode=OneWay}" Width="Auto" Grid.Column="1" Margin="5,0,5,1"
                       Foreground="#FF513A29" FontSize="13.333" FontFamily="Mongolian Baiti" />

        </Grid>
        <DataTemplate.Triggers>
            <Trigger Property="Text" Value="Ongoing" SourceName="textBlock1">
                <Setter Property="Background" TargetName="grid">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                            <GradientStop Color="DarkOrange" Offset="1" />
                            <GradientStop Color="White" Offset="0.96" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
                        <Trigger Property="Text" Value="Overdue" SourceName="textBlock1">
                <Setter Property="Background" TargetName="grid">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                            <GradientStop Color="White" Offset="0.96" />
                            <GradientStop Color="Red" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="Text" Value="Canceled" SourceName="textBlock1">
                <Setter Property="Background" TargetName="grid">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                            <GradientStop Color="White" Offset="0.96"/>
                            <GradientStop Color="Black" Offset="1"/>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>

            <Trigger Property="Text" Value="Completed" SourceName="textBlock1">
                <Setter Property="Background" TargetName="grid">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="Green" Offset="1" />
                            <GradientStop Color="White" Offset="0.96" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </DataTemplate.Triggers>
    </DataTemplate>
    <Style x:Key="CheckBoxStyle" TargetType="{x:Type CheckBox}">
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalAlignment" Value="Right" />
        <Setter Property="Foreground" Value="#FF707070" />
        <Setter Property="Margin" Value="5,5,5,0" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
    </Style>
    <Style x:Key="TextBlockStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="#FF707070" />
        <Setter Property="FontFamily" Value="Cambria" />
        <Setter Property="FontSize" Value="21.333" />
        <Setter Property="Margin" Value="5,5,0,0" />
    </Style>
    <Style x:Key="FocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true"
                               Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                               StrokeThickness="1" StrokeDashArray="1 2" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <SolidColorBrush x:Key="Button.Static.Background" Color="#FFDDDDDD" />
    <SolidColorBrush x:Key="Button.Static.Border" Color="#FF707070" />
    <SolidColorBrush x:Key="Button.MouseOver.Background" Color="#FFBEE6FD" />
    <SolidColorBrush x:Key="Button.MouseOver.Border" Color="#FF3C7FB1" />
    <SolidColorBrush x:Key="Button.Pressed.Background" Color="#FFC4E5F6" />
    <SolidColorBrush x:Key="Button.Pressed.Border" Color="#FF2C628B" />
    <SolidColorBrush x:Key="Button.Disabled.Background" Color="#FFF4F4F4" />
    <SolidColorBrush x:Key="Button.Disabled.Border" Color="#FFADB2B5" />
    <SolidColorBrush x:Key="Button.Disabled.Foreground" Color="#FF838383" />
    <Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="#FFE4E4E4" />
        <Setter Property="FontSize" Value="18.667" />
        <Setter Property="BorderBrush" Value="{x:Null}" />
        <Setter Property="Background">
            <Setter.Value>
                <RadialGradientBrush>
                    <GradientStop Color="#FFEE7A19" Offset="0.008" />
                    <GradientStop Color="#FFDC5700" Offset="0.984" />
                </RadialGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="MinHeight" Value="40" />
        <Setter Property="MinWidth" Value="80" />
        <Setter Property="Margin" Value="5" />


        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Padding" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border x:Name="border" CornerRadius="3" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="true">
                        <Border.Background>
                            <RadialGradientBrush>
                                <GradientStop Color="#FFEE7A19" Offset="0.008" />
                                <GradientStop Color="#FFDC5700" Offset="0.984" />
                            </RadialGradientBrush>
                        </Border.Background>
                        <ContentPresenter x:Name="contentPresenter" Focusable="False"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          Margin="{TemplateBinding Padding}" RecognizesAccessKey="True"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FFF1872D" Offset="0.008" />
                                        <GradientStop Color="#FFEC782C" Offset="0.984" />
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FFCA5F06" Offset="0.012" />
                                        <GradientStop Color="#FFBE4D04" Offset="0.984" />
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="AddNewNoteButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Foreground" Value="#FFE4E4E4" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="BorderBrush" Value="{x:Null}" />
        <Setter Property="Background">
            <Setter.Value>
                <RadialGradientBrush>
                    <GradientStop Color="#FFEE7A19" Offset="0.008" />
                    <GradientStop Color="#FFDC5700" Offset="0.984" />
                </RadialGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Margin" Value="5" />


        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Padding" Value="5,1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border x:Name="border" CornerRadius="3" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="true">
                        <Border.Background>
                            <RadialGradientBrush>
                                <GradientStop Color="#FFEE7A19" Offset="0.008" />
                                <GradientStop Color="#FFDC5700" Offset="0.984" />
                            </RadialGradientBrush>
                        </Border.Background>
                        <ContentPresenter x:Name="contentPresenter" Focusable="False"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          Margin="{TemplateBinding Padding}" RecognizesAccessKey="True"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FFF1872D" Offset="0.008" />
                                        <GradientStop Color="#FFEC782C" Offset="0.984" />
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FFCA5F06" Offset="0.012" />
                                        <GradientStop Color="#FFBE4D04" Offset="0.984" />
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="MaxHeight" Value="50" />
        <Setter Property="Height" Value="20" />
    </Style>
</ResourceDictionary>